<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
	<title>SensorBox Documentation</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" /></noscript>


</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">
	
		<!-- Header -->
		<header id="header">
			<div class="logo">
				<span class="icon fa-envira"></span>
			</div>
			<div class="content">
				<div class="inner">
					<h1>SensorBox</h1>
					<p>Documentation of a master's seminar to build a low-cost sensor box to monitor basic
						environmental variables in forest environments.</p>
				</div>
			</div>
			<nav>
				<ul>
					<li><a href="#intro">Intro</a></li>
					<li><a href="#sensors">Sensors</a></li>
					<li><a href="#assembly">Assembly</a></li>
					<li><a href="#software">Software</a></li>
					<li><a href="#Data">Data</a></li>
					<!--<li><a href="#elements">Elements</a></li>-->
				</ul>
			</nav>
		</header>
	
		<!-- Main -->
		<div id="main">
	
			<!-- Intro -->
			<article id="intro">
				<h2 class="major">Introduction</h2>
				<p>The SensorBox was developed during a master&#39;s seminar at the University of Marburg. The idea of the SensorBox was to create a tool which enables the collection of some basic environmental variables along a vertical path in forest
					structures. The box is part of a broader research effort to effectively monitor biotic and abiotic factors to draw benefits for biodiversity conversation and the sustainable management of ecosystem services. The innovation of the SensorBox
					lies in its cheap and reconstructable design as well as its ability to collect data in a 3D-space through the use of cable cars attached to individual trees in a forest. In the video below you can get the basic idea of the SensorBox moving
					upwards and collecting data at specified height levels.</p>
	
				<video height="50%" class="image main" controls="" onerror="this.style.display = 'none';">
					<source src="images/intro_video.mp4" type="video/mp4" <="" video=""></video>
	
				<p>This webpage reports on the materials used and the way to assembly the SensorBoxes to get a fully deployable sensor unit to measure variables such as temperature, humidity, light as well as visual and audio information on the environment.
				</p>
	
				<p>The seminar is closely associated to the LOEWE research project <a href="https://www.uni-marburg.de/de/fb19/natur40">Natur 4.0</a> which aims at innovative data acquisition and processing techniques to developed a methodology to a spatial
					and temporal comprehensive monitoring of landscapes and ecosystems. The basic tool-kit on the side of data acquisition consists of a spatially-dispersed network of environmental sensors, unmanned aerial vehicles (UAV), automatic rovers as
					well as low-invasive sensors placed on animals and humans moving through the landscape to be monitored. A very central role comes to the SensorBoxes, which allow for a comprehensive, local-scale and continuous measurement of environmental
					variables.</p>
			</article>
	
			<!-- Sensors -->
			<article id="sensors">
				<h1 class="major">Sensors</h1>
				<p>Here you will find some information on the different sensors we used in the implementation of the SensorBox. Of course, other sensors for measuring the same or even other environmental variables could be used as well. The listed sensors
					were chosen due to their low prices but also because they measure the variables of interest to us accurately. For the microphone we tested two different versions, one significantly more expensive than the other one. If the quality of the
					records of the cheaper microphone would prove well enough, costs could be reduced.</p>
				<h3>Camera</h3>
				<hr />
				<p><span class="image main"><img src="images/cam.png" alt="" /></span></p>
				<h4>Product name: </h4>
				<p>Raspberry Pi Camera Module v2.1</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Sensor: Sony IMX219 8 Megapixel sensor</li>
					<li>Supported formats: 1080p@30Hz, 720p@60Hz and 640x480p@60/90Hz </li>
					<li>Ribbon cable for CSI-port : 30 cm</li>
					<li>Dimensions: 25x24x9 (mm, HxBxD)</li>
				</ul>
				<h4>Manufacturer information:</h4>
				<p><a href='https://www.raspberrypi.org/products/camera-module-v2/'>Raspberry Pi foundation</a></p>
				<p>Depending on your local retailer available for about 26 €</p>
				<h4>Sensor usage:</h4>
				<p>The camera is used to monitor the canopy from below the crown surface. The collected data can be used to calculate the greenness-index to compare it with UAV generated aerial RGB-images. Further it can be used to monitor vegetation growth
					and animal wildlife detection.</p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/sensors/optical.py'>Link to camera class definition at the sensorproxy-repository</a></p>
				<p>&nbsp;</p>
	
				<h3>Microphone - expensive version</h3>
				<hr />
				<p><span class="image main"><img src="images/micro1.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>RØDE - Smartlav+</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Microphone type: pressure gradient</li>
					<li>Transmission range: 20Hz to 20kHz</li>
					<li>Output impedance: 0Ω</li>
					<li>Sensitivity: -32.0dB re 1 Volt/Pascal (25.50mV @ 94 dB SPL) +/- 2 dB @ 1kHz</li>
					<li>Dimensions: 118x4.50x4.50 (mm; HxWxD)</li>
				</ul>
				<h4>Retailer information:</h4>
				<p><a href='http://www.rode.com/microphones/smartlav'>RØDE Microphones</a></p>
				<p>Available for approximately 50€</p>
				<h4>Sensor usage:</h4>
				<p>The microphone is used to record the singing of birds. This data can be used by a machine learning algorithm to identify bird species. Bird species are an important indicator for biodiversity in forest ecosystems.</p>
				<p>In the first stage of development two different models of microphones are tested to evaluate if a cheaper microphone is also suitable for bird species identification.</p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/sensors/audio.py'>Link to audio class definition at the sensorproxy-repsoitory</a></p>
				<p>&nbsp;</p>
	
				<h3>Microphone - cheap version</h3>
				<hr />
				<p><span class="image main"><img src="images/micro2.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>Foxnovo SF-555</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Microphone type: condenser</li>
					<li>Transmission range: 50Hz to 16kHz</li>
					<li>Output impedance: &lt;2.2Ω</li>
					<li>Sensitivity: -55.0dB +/- 2 dB @ 1kHz</li>
					<li>Dimensions: 67x12x14 (mm; HxWxD)</li>
				</ul>
				<h4>Retailer information:</h4>
				<p><a href='https://www.amazon.de/Foxnovo-Portable-USB-2-0-Kondensator-Mikrofon-Chat/dp/B00XA01IQC'>Purchased at Amazon</a></p>
				<p>Available for approximately 10€.</p>
				<h4>Sensor usage:</h4>
				<p>The microphone is used to record the singing of birds. This data can be used by a machine learning algorithm to identify bird species. Bird species are an important indicator for biodiversity in forest ecosystems.</p>
				<p>In the first stage of development two different models of microphones are tested to evaluate if a cheaper microphone is also suitable for bird species identification.</p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/sensors/audio.py'>Link to audio class definition at the sensorproxy-repsoitory</a></p>
				<p>&nbsp;</p>
	
				<h3>Temperature &amp; Humidity Sensor</h3>
				<hr />
				<p><span class="image main"><img src="images/temp.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>DHT22 (AM2302) temperature-humidity sensor</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Operating voltage: 3-5V</li>
					<li>Sensitivity humidity: 0-100% ± 2-5% </li>
					<li>Sensitivity temperature: -40-80°C ±0.5°C</li>
					<li>Dimensions: 15.1x25x7.7 (mm, HxBxD)</li>
				</ul>
				<h4>Manufacturer information:</h4>
				<p><a href='https://www.adafruit.com/product/385'>Adafruit</a></p>
				<p>Depending on your local retailer for about 10 €</p>
				<h4>Sensor usage:</h4>
				<p>The temperature and humidity sensor is used to measure micro-climatic data. The lift-system allows to collect the data in a vertical range for advanced climatic modeling below the crown surface.</p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/sensors/environment.py#13'>Link to environmental sensor class definition at the sensorproxy-repository.</a></p>
				<p>&nbsp;</p>
	
				<h3>Light Sensor</h3>
				<hr />
				<p><span class="image main"><img src="images/light.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>Adafruit TSL2591 High Dynamic Range Digital Light Sensor</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Sensitivity: 188 uLux sensitivity, up to 88,000 Lux input measurements.</li>
					<li>Temperature range: -30 to 80 °C</li>
					<li>Operating voltage: 3.3-5V </li>
					<li>Dimensions: 19x16x1(mm, HxBxD)</li>
				</ul>
				<h4>Retailer information:</h4>
				<p><a href='https://www.adafruit.com/product/1980'>Adafruit</a></p>
				<p>Depending on your local retailer available for about 6 €</p>
				<h4>Sensor usage:</h4>
				<p>The digital light sensor gathers information about the light intensity in the visible an near infrared spectrum. The data can be used to model vegetation density and light distribution at different height-levels. On the SensorBox it is
					faced upwards and takes measurements at different heights. The idea is to use this data to model some forest structural parameters to achiveve a spatially comprehensive dataset in conjunction with aerial images collected by UAVs. </p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/sensors/environment.py#43'>Link to environmental sensor class definition at the sensorproxy-repository.</a></p>
				<p>&nbsp;</p>
	
				<h3>Hall Sensor</h3>
				<hr />
				<p><span class="image main"><img src="images/hall.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>JOY-IT KY-024 Hall Sensor</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Chipset: A3141</li>
					<li>OP-amplifier: LM393</li>
				</ul>
				<h4>Retailer information:</h4>
				<p><a href="http://sensorkit.en.joy-it.net/index.php?title=KY-024_Linear_magnetic_Hall_Sensor#Technical_data_.2F_Short_description">SensorKit X40</a>
					Available for approximately <a href="https://www.reichelt.de/entwicklerboards-magnetischer-hallsensor-debo-sens-hall-p239090.html">3€</a> depending on your local retailer.</p>
				<h4>Sensor usage:</h4>
				<p>The hall sensors are responsible to control the movement of the lift system. By attaching magnets at the upper and lower end of the lift we can build a magnetic field which is measured by the hall sensors. The engine powering the lift can be stopped when the
					SensorBox reaches the upper or lower limit. Similarily, the sensor box can be stopped at different heights to take measurments.</p>
				<h4>Source code:</h4>
				<p><a href='https://github.com/Nature40/pysensorproxy/blob/541eac35379bc2d4dc3b24b8412218af6f142d63/sensorproxy/lift.py#38'>Link to the lift class configuration with hall sensors for indicating upper and lower level</a></p>
				<p>&nbsp;</p>
	
				<h3>Real-time clock</h3>
				<hr />
				<p><span class="image main"><img src="images/clock.png" alt="" /></span></p>
				<h4>Product name:</h4>
				<p>DS3231 real-time clock</p>
				<h4>Technical product information:</h4>
				<ul>
					<li>Accuracy ±2ppm from 0°C to +40°C</li>
					<li>Accuracy ±3.5ppm from -40°C to +85°C</li>
					<li>Battery backup input for continuous timekeeping</li>
					<li>Operating temperature ranges:</li>
					<ul>
						<li>Commercial: 0°C to +70°C</li>
						<li>Industrial: -40°C to +85°C</li>
					</ul>
					<li>Leap year compensation valid up to 2100</li>
					<li>Programmable square-wave output</li>
					<li>400kHz I2C Interface</li>
					<li>3.3V operation voltage</li>
					<li>RST input/output</li>
				</ul>
				<h4>Retailer information:</h4>
				<p><a href="https://eckstein-shop.de/DS3231-RTC-Modul-LIR2032">Eckstein GmbH</a>
					Available for approximately <a href="https://eckstein-shop.de/DS3231-RTC-Modul-LIR2032">4€</a>
					depending on your local reatailer.
				</p>
				<h4>Sensor usage:</h4>
				<p>The real-time clocke ensures that the data collected by different SensorBoxes are saved to disk with the correct time-stamp associated with each measurment. A battery is attached to the clock which ensures that even in the case of power shortages or other system breakdowns the right time-stamp is available when the system reboots.</p>
				
				<h1 class="major">Hardware</h1>
			<h3>Raspberry Pi</h3>
			<hr />
			<p><span class="image main"><img src="images/pt.png" alt="" /></span></p>
			<h4 id="manufacturer-product-description-">Product name:</h4>
			<p>Raspberry Pi 3 Model B version 1.2</p>
			<h4 id="technical-product-information-">Technical product information:</h4>
			<ul>
				<li>Quad Core 1.2GHz Broadcom BCM2837 64bit CPU</li>
				<li>1GB RAM</li>
				<li>BCM43438 wireless LAN and Bluetooth Low Energy (BLE) on board</li>
				<li>40-pin extended GPIO</li>
				<li>4 USB 2 ports</li>
				<li>4 Pole stereo output and composite video port</li>
				<li>CSI camera port for connecting a Raspberry Pi camera</li>
				<li>Micro SD port for loading your operating system and storing data</li>
				<li>Upgraded switched Micro USB power source up to 2.5A</li>
			</ul>
			<h4 id="retailer-information-">Retailer information:</h4>
			<p><a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi foundation</a></p>
			<p>available for approximately 30&#x20AC; depending on your local retailer</p>
			<h4>Usage:</h4>
				<p>The Raspberry Pi microcontroller is the heart piece of the SensorBox. Here, the software for the different sensors is stored and executed. The data collected is temporary stored here as well, before it is send to a base station.</p>
	
			<h3 id="powerbank">Powerbank</h3>
			<hr />
			<p><span class="image main"><img src="images/bank.png" alt="" /></span></p>
			<h4 id="manufacturer-product-description-">Product name::</h4>
			<p>EasyAcc MegaCharge Doubin 26000mAh Power bank</p>
			<h4 id="technical-product-information-">Product name:</h4>
			<ul>
				<li>Battery capacity: 26000mAh x 3.7V=96.2Wh</li>
				<li>Battery type: Lithium-Ion-Battery</li>
				<li>Input: DC 5V 4A(max)</li>
				<li>Output: DC 5V 4.8A(max)</li>
				<li>Dimensions: 167x80x22mm (WxLxH)</li>
				<li>Weight: 454g</li>
			</ul>
			<h4 id="retailer-information-">Retailer information:</h4>
			<p><a href="https://www.easyacc.com/de/670-easyacc-26000mah-power-bank.html">Easyacc</a></p>
			<p>Available for approximately 50&#x20AC; depending on your local retailer</p>
			<h4>Usage:</h4>
				<p>The powerbank is the source of energy for the microcontroller and the sensors. The microcontroller, though in sleep-mode between the measurements, needs a steady power supply while the sensors are only powered during their respective measurements. Especially in remote areas, power supply is a critical issue for selfcontained sensor units. </p>
				
						<h3 id="recharage pad">Wireless Recharge Pad</h3>
			<hr />
			<p><span class="image main"><img src="images/charger.png" alt="" /></span></p>
			<h4 id="manufacturer-product-description-">Product name::</h4>
			<p>Universal Wireless Charger Receiver Module</p>
			<h4 id="technical-product-information-">Product name:</h4>
			<ul>
				<li>Input: 5V</li>
				<li>Output: 1000ma</li>
				<li>Interface: micro-USB</li>
				<li>Dimensions: 70x46x1.2mm (WxLxH)</li>
				<li>Weight: 454g</li>
			</ul>
			<h4 id="retailer-information-">Retailer information:</h4>
			<p><a href="https://www.ebay.de/itm/Universal-QI-Wireless-Charging-Charger-Receiver-Module-for-Micro-USB-Cell-Phone/122771068016?_trkparms=aid%3D222007%26algo%3DSIM.MBE%26ao%3D2%26asc%3D20160908110712%26meid%3D05fa0c4d88044a5082e7b47380cabba0%26pid%3D100677%26rk%3D9%26rkt%3D30%26sd%3D382521224429%26itm%3D122771068016%26pg%3D2385738&_trksid=p2385738.c100677.m4598">envrionmental2000</a></p>
			<p>Available for approximately 1.3&#x20AC; depending on your local retailer</p>
			<h4>Usage:</h4>
				<p>The wireless charger pad is used to re-power the powerbank at the ground stations during night, when no mearuments are taken and the SensorBox rests at the ground. The energy is supposed to be provided either by solar panels recharging simple car batteries or the car batteries will need manual changes. However, the use of the a wireless charging technology allows the SensorBox to recharge autonomously without further need of human action.</p>
	
			<h3 id="containment-box">Containment box</h3>
			<hr />
			<p><span class="image main"><img src="images/box_only.PNG" alt="" /></span></p>
			<h4 id="manufacturer-product-description-">Product name:</h4>
			<p>Spelsberg TK PC 1811-9-m</p>
			<h4 id="technical-product-information-">Technical product information:</h4>
			<p>Dimensions:</p>
			<ul>
				<li>Width: 180 mm</li>
				<li>Length: 110 mm</li>
				<li>Height: 90 mm</li>
				<li>Interior height: 75 mm</li>
			</ul>
			<p>Material:</p>
			<ul>
				<li>Base: Polycarbonate, glass-fibre reinforced, grey simila</li>
				<li>Cover: Polycarbonate, glass-fibre reinforced, grey simila</li>
				<li>Sealing: Polyurethane</li>
				<li>Cover screw: Polyamide 6, fiber-glass reinforced</li>
			</ul>
			<p>Properties:</p>
			<ul>
				<li>Ingress protection: IP66 - acc. EN 60529 / DIN VDE 0470-1</li>
				<li>Ambient temperature range (&#xB0;C): -35 to 80 </li>
				<li>Ambient temperature (24 h): 60 &#xB0;C</li>
				<li>Max. rel. humidity at 40&#xB0; C: 100%</li>
				<li>Rated insulation voltage AC: 690V</li>
				<li>Impact restistance: {IK08 nach DIN EN 5012 / VDE 0470 Teil 100 }</li>
				<li>Protection class: II - isolate protection acc. VDE 0106 				Protective</li>
				<li>PVC and silicone free</li>
				<li>UV resistance</li>
				<li>Combustion behaviour to UL: 5VA nach UL 50 / UL 746C</li>
				<li>Combustion behaviour to UL: {V-2 nach UL 94}</li>
				<li>Combustion behaviour to VDE: 960&#xB0;C acc. VDE 0471/ EN 60695</li>
			</ul>
			<h4 id="retailer-information-">Retailer information:</h4>
			<p><a href="https://at.rs-online.com/web/p/universalgehause/0832605/"> RS Components Handelsgesellschaft</a></p>
			<p>Depending on your local retailer available for about 25 &#x20AC;</p>
			<h4>Usage:</h4>
				<p>The contaiment box contains the microcontroller and all environmental sensors are attached to it. The box need to be waterproof to secure the electronics inside. It also should habe a long living cycle, because we do not want the structural integrity of our SensorBox to deteriorate very quickly. At the same time, it was important that only non-harmful materials to the environment are used.</p>
			</article>
	
			<!-- Assembly -->
			<article id="assembly">
				<h2 class="major"> Construction materials</h2>
<p><span>Here you will find the step-by-step information on the assembly of the sensor box. Current versions of the designs for required 3D-printed parts can be found in a </span><a href='https://github.com/Nature40/Sensorboxes-Images/tree/master/printdesigns/version_1/gondola'><span>GitHub repository</span></a><span> of Natur4.0.</span></p>
<h2>Preparing the containment box </h2>
<ul>
<li><span>Containment box</span></li>
<li><span>Hinge set</span></li>
<li><span>Cable-tie sockets</span></li>
<li><span>Raspberry Pi model 3</span></li>
<li><span>Heat sinks</span></li>
<li><span>Breadboard </span></li>
<li><span>Powerbank with an USB power-cable</span></li>
<li><span>Wireless charging pad</span></li>
<li><span>6 rolls </span></li>
<li><span>3D-printed mounting plate</span></li>
<li><span>100 cm of rope (approx. 2mm width)</span></li>
<li><span>30 cm rope (approx. 2mm width)</span></li>
<li><span>4 times 4x12mm screws</span></li>
<li><span>4 times 2.9x13mm screws</span></li>
<li><span>6 times 4x16mm countersunk-head screws</span></li>
<li><span>6 times 4mm safety nut</span></li>
<li><span>6 times 4mm washers</span></li>
<li><span>Black and red jumper cables (50cm)</span></li>


</ul>
<h3>Attaching hinges and preparing cable and roll entries</h3>
<p><span>First, we drilled some holes in the containment box to attach the hinges between the box and lid. We used a 5mm drill bit which fits well into the indentations at the side of the box. We used a 6mm drill bit to slightly expand the holes. Then, we attached the hinges with the supplied screws from the hinge set. After attaching the hinges, we prepared the topside of the box by drilling holes for the sensor tower with entries for the cables of the sensors, the camera and the microphone. To correctly place the entry holes for the cables we prepared a </span><a href='images/Schablone_Sensorhalterung.pdf'><span>printable template</span></a><span>. Then we drilled holes which are used to attach the rolls to the containment box using another </span><a href='images/Schablone_F%C3%BChrungsrollen.pdf'><span>template</span></a><span>. Here, we used a 3,5 mm drill bit which fits very well with the rolls we purchased. </span></p>
<p><span>We drilled another two holes for the suspension rope which ensures the stability of the box while being mounted in the cable car. Here, we used a 4mm drill and another printable template. We inserted the rope of 100cm in length in both holes put a knot on the inner ends and sealed it by cautiously using a lighter to melt some of the plastic. We made sure that the length of the rope outside of the box is at least 80 cm. On the inside, we attached two cable tie sockets and connected them with the 30 cm rope. </span></p>
<p><span>Last we used the six 4x16mm countersunk-head screws to attach the rolls to the box. We used the washers to seal off the entry holes and the safety nuts to ensure the firmness of the rolls. Additionally, we put instant glue under the washers and safety nuts and then gave the screws and nuts one last thrust to ensure the box is waterproof. </span></p>
<h3> Installing the Raspberry Pi and  the power supply</h3>
<p><span>We used four 4x12 mm screws to attach the 3D-printed microcontroller mounting plate cautiously to the containment box. The screws must not pierce through the back of the box.  Before attaching the microcontroller to the socket we pasted the heat sinks on the processor units of the Raspberry Pi. Then we put the it on the mounting plate with the USB-ports pointing to the right side and fixated it with four 2,9x13mm screws. From a simple breadboard we took only one energy rack and placed it on the bottom side of the mounting plate. Then we put the powerbank on the inner side of the containment box right where the mounting plate shows a free space of the size of the powerbank. We did not connect the USB-power-cable to the Raspberry Pi just yet, since we first attached all the missing sensors.</span></p>
<p>
<span class="image main"><img src="images/pi_mount_rdy.png" onerror="this.style.display = 'none';"></span>
</p>
<h2 class="major">Attaching the sensors</h2>
<h3>The Light-Microclimate-Sensor-Tower (LMST)</h3>
<ul>
<li><span>Temperature and humidity sensor</span></li>
<li><span>Lux-sensor</span></li>
<li><span>Cover glass pane 25x25mm</span></li>
<li><span>3D-printed parts for the radiation shield</span></li>
<li><span>Enough jumper cables to connect the sensors</span></li>


</ul>
<p><span>We recommend to use jumper cables of 50cm in length to connect the temperature/humidity and the lux sensor since they are placed outside of the box and the distance from the sensors to the microcontroller is approximately that length. For the color coding of the the jumper cables we chose red for energy supply, black for grounding and we specified different colors for the data cables of the sensors as it can be seen in the </span><a href="#fritzing"><span>fritzing scheme</span></a><span> below. It is very important to stick to a determined color scheme to ease a quick trouble-shooting in the field and in the workshop.</span></p>
<div id="fritzing">
	<p>
		<span class="image main"><img src="images/frizzing.png" onerror="this.style.display = 'none';"></span>
	</p>
</div>
<p><span>The lux sensor is inserted to its mount on the top of the radiation shield and a fine cover pane of glass is placed on top of it. We used a simple glue gun to fix the cover pane ensuring that the space between the pane and the plastic mount is covered fully with glue. Additionally, we cut some grooves in the cooled glue  to ensure that water from rain and condensation can drain. We connected the remaining parts of the radiation shield with the top part holding the lux sensor. After that we attached the temperature/humidity sensor to the base of the radiation shield and finally connect the base with the remaining parts of the radiation shield.</span></p>
<p>
<span class="image main"><img src="images/lmst.png" onerror="this.style.display = 'none';"></span>
</p>
<h3>Attaching the camera</h3>
<ul>
<li><span>Raspberry Pi camera module v.1.2</span></li>
<li><span>30cm ribbon cable</span></li>
<li><span>3d printed camera mount</span></li>
<li><span>Cover glass pane 25x25mm</span></li>

</ul>
<p><span>At first, we connected the ribbon cable to the camera module and then put it into the 3D-printed camera mount. We closed the cap on the backside of the mount and placed the cover pane on the front fixing it by using a glue gun. Here, we also made sure that the glue covers the whole area between the camera mount and the cover pane. Finally we cut some grooves in the cool glue just to ensure that rain and condensation water can drain.</span></p>
<p>
<span class="image main"><img src="images/cam_rdy2.png" onerror="this.style.display = 'none';"></span>
</p>
<h3>Placing the real-time-clock (RTC)</h3>
<ul>
<li><span>Real-time-clock</span></li>
<li><span>Jumper-cables </span></li>
<li><span>Pin-header with 2 pins</span></li>


</ul>
<p><span>The real-time clock is placed in the rectangular free space on the 3D-printed mounting plate. Because of the final orientation of the clock with the battery heads up, we would not be able to connect the jumpers to the contacts. So we soldered a pin-header to the SCL and SDA contacts. This way we were able to connect the jumper cables as indicated in the </span><a href="#fritzing"><span>fritzing scheme</span></a><span>.</span></p>
<p>
<span class="image main"><img src="images/RTC_rdy.png" onerror="this.style.display = 'none';"></span>
</p>
<h3>Attaching the hall sensors</h3>
<ul>
<li><span>2 hall sensors</span></li>
<li><span>Jumper cables</span></li>


</ul>
<p><span>We connected the jumper cables as indicated by the </span><a href="#fritzing"><span>fritzing scheme</span></a><span>. Before fixing the hall sensor to the box, the sensitivity of the sensors needs to be adjusted. This is achieved by turning the adjusting-screw of the potentiometer approximately 15-times clock-wise until one can hear a slight click sound. Once the hall sensor is supplied with energy, we can use a magnet to test the functionality of the sensor: one of the lamps should start glowing when a magnetic field is within the sensor range. However, to save energy consumption we decided to disconnect these lamps from the energy supply by using the soldering machine. The hall sensors are then glued on the inside of right-hand side of the box right below right below the screws of the upper and lower rolls. For the software controlling the movement of the box to work correctly, it is very important that the hall sensors are oriented correctly inside the box. The one controlling the upper limit (green jumper in this case) is connected to GPIO21 while the one controlling the lower limit (orange jumper) is connected to GPIO22.</span></p>
<p>
<span class="image main"><img src="images/inst_hall.png" onerror="this.style.display = 'none';"></span>
</p>
<h3>Attaching the microphones and final assembly of the sensor tower </h3>
<ul>
<li><span>Microphones</span></li>
<li><span>Sound cables</span></li>
<li><span>3d-printed sensor tower</span></li>

</ul>
<p><span>We inserted both types of microphones into slightly different versions of the 3D-printed sensor tower and fixed them with glue. The more expensive microphone needs a additional connections to a soundcard before the sound cable can be connected to the audio entry on the Raspberry Pi. Next, we attached the previously prepared camera module to the sensor tower and made sure that the cable enters the box through the slit from the template and connected it to the microcontroller. Then the LMST is fixed to the rest of the sensor tower carefully making sure all jumper cables of the sensors are led inside the box. The LMST can be fixed to the rest of the sensor tower by gently turning them against each other to close the bayonet catch.</span>
<span>Finally, all the cables in the inside are connected to the microcontroller as indicated in the </span><a href="#fritzing"><span>fritzing scheme</span></a><span>. We also made sure to tie loose jumper cables together and fixated them by using cable-tie sockets and some wire. </span></p>
<p><span>At the end, we made sure to seal all spaces between the sensor tower and the containment box either with silicon or glue. We also applied an additional layer of silicon to every other potential entry point of water or vapor like the the cable entries. </span></p>
<p>
<span class="image main"><img src="images/final.png" onerror="this.style.display = 'none';"></span>
</p>
			</article>
			​
			<!-- Software -->
			<article id="software">
				<h2>Software</h2>
				<hr />
				<p>This page contains a brief guide getting the Raspberry Pi up and running using the custom <a href="https://github.com/Nature40/Sensorboxes-Images/releases/tag/0.9.3">image</a> developed by <a href="https://github.com/jonashoechst">Jonas
						Hoechst</a>.</p>
				<p>&nbsp;</p>
	
				<h3>Requirements:</h3>
				<hr />
				<ul>
					<li>RaspberryPi</li>
					<li>Micro-SD Card</li>
					<li>A WIFI capable laptop or PC</li>
					<li>(Micro-)SD card reader</li>
				</ul>
				<p>&nbsp;</p>
	
				<h3>Flashing the Micro-SD Card:</h3>
				<hr />
				<p>
					First we downloaded the operating system <a href="https://github.com/Nature40/Sensorboxes-Images/releases/tag/0.9.3">here</a> and wrote it with the tool <a href="https://www.balena.io/etcher/">etcher</a> to the Micro-SD card.
				</p>
				<p>
					The Raspberry Pi can then be started from the Micro-SD card. After a few minutes of waiting the Raspberry Pi will start to send a Wifi signal.
					The password <code>natur40</code> is required to connect to the Wifi.
	
				</p>
				
				<p>&nbsp;</p>
	
				<h3>Remote connect to the Raspberry Pi:</h3>
				<hr />
				<p>
					Once your device is connected to the WiFi we can use <code>ssh</code> to start a remote shell connection.
				</p>
				<h4>Getting SSH ready</h4>
				<p>If you already have a working ssh environment you can skip this part.</p>
				<h5>Linux:</h5>
				<p>
					Most modern distributions of Linux already have ssh installed. If ssh is not installed you can find installation instructions <a href="https://www.openssh.com/">here</a>.
				</p>
				<h5>Windows:</h5>
				<p>
					There are two main ways to use <code>ssh</code> under Windows. The first is to download and install <a href="https://www.putty.org/">PUTTY</a>. The second option is to install the <a href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux">linux subsystem</a> from the windows store and then use ssh like on linux.
				</p>
				<h4>Connecting via ssh</h4>
				<p>
					In order to connect to the Raspberry Pi we need to find out it's IP-address.
					Since the Raspberry Pi creates a hotspot the IP-address sould be the same for all downloaded copies of the image: <code>192.168.4.1</code>
	
					To be sure the following command returns the Ip-address:
					<p></p>
					<b>Linux:</b>
					<blockquote>
						arp -a
					</blockquote>
					<b>Windows:</b>
					<blockquote>
						ipconfig | findstr /i "Gateway"
					</blockquote>
	
					Will retun the local IP-address of your router and in our case of the Raspberry Pi.
				</p>
				<p>
					Once we got the IP-address we can issue the ssh command (replace "192.168.4.1" with whatever IP-adrress you got):
	
					<blockquote>
						ssh pi@192.168.4.1
					</blockquote>
					After the connection is established the Raspberry Pi will ask for authentication. <code>natur</code> is the pi's user password.
				</p>
				<p>
					The first thing we should do after a successful login is to log back out so we can calibrate the connected <a href="https://goergen95.github.io/sensorbox-docu/#sensors">real-time clock (RTC)</a>
					To log back out simply type: <code>exit</code>. When we are no longer connected to the Pi we can execute the following command to copy the systemtime of our machine to the PI's RTC: <blockquote>date | ssh pi@192.168.4.1 'sudo hwclock
						--set --date "`cat`"; echo "hwclock set to: `sudo hwclock`"'</blockquote>
				</p>
				<h4>Controlling measurements:</h4>
				<p>
					In this build the measurement protocol is implemented as a <a href="https://www.freedesktop.org/software/systemd/man/systemd.html#">systemd service</a>.
				</p>
				<p>
					Therefore, we can control the service using the <a href="https://www.freedesktop.org/software/systemd/man/systemctl.html">systemctl</a> command.<br>
					The measurement unit is called <b>sensorproxy</b>.
					<br>
					<br>
					To check the current <b>status</b> of sensorproxy type:<blockquote>sudo systemctl status sensorproxy</blockquote>
					In order to <b>start</b> sensorproxy type:<blockquote>sudo systemctl start sensorproxy</blockquote>
					To <b>stop</b> sensorproxy type:<blockquote>sudo systemctl stop sensorproxy</blockquote>
					Stopping and starting can be done at the same time using the <b>restart</b> option:<blockquote>sudo systemctl restart sensorproxy</blockquote>
				</p>
				<p>
					With each start of the service a full measurement with all connected sensors will be carried out.
					Given the case a sensor does not send its readings there is the option to check the systemlogs with: <blockquote>sudo journalctl -u sensorproxy</blockquote>
				</p>
				<p>
					The <i>sensorproxy</i> service is a build-in tool to check all connected sensors. To execute the system check type: <blockquote>sensorproxy -t</blockquote>
					To increase <a href="https://en.wikipedia.org/wiki/Verbosity">verbosity</a> simply add between one or four "v" like this: <blockquote>sensorproxy -tvv</blockquote>
				</p>
				<p>&nbsp;</p>
	
				<h3>Copying files:</h3>
				<hr />
				<p>
					The most convenient way to copy files from and to the Raspberry Pi is by using the <a href="http://man7.org/linux/man-pages/man1/scp.1.html"><code>scp</code></a> command.
					A simple example would be:
					<blockquote>scp /path/to/file.txt pi@192.168.4.1:/path/to/destinationfolder/</blockquote>
					This command copies a single file to the given destination directory on the Raspberry Pi.
					<br>
					<br>
					To copy entire folders and subfolders we have to use the <code>-r</code> option like this:
					<blockquote>scp -r pi@192.168.4.1:/path/to/sourcefolder/ /path/to/destination/</blockquote>
					This command will copy the entire <i>sourcefolder</i> including every subdirectory in <i>sourcefolder</i> to the destination directory.
					<br>
					<br>
					<b>Notice: </b>With the first command we copied a file <b>from</b> our local machine <b>to</b> the Raspberry Pi while the second command copied a directory <b>from</b> the Raspberry Pi <b>to</b> our local machine.
	
				</p>




			</article>


			<!-- Data -->
			<article id="Data">
				<h2 class="major"> Data </h2>
				<p><span>In a simple test run of our sensorboxes we placed all of them next to each other overnight. In total, we placed six boxes. One box showed issues in saving the data to disk, so we could not include it&#39;s results in the analysis.
						Another box did not collect temperature and humidity data, so we only have 4 boxes to compare the measurements for these two variables. The illuminance sensor worked for all boxes, but since we made our test run overnight, there are not
						as many observations to compare.</span></p>
				<h3>Temperature</h3>
				<p><span>The following plot shows the measurement of four different sensorboxes for the variable air temperature. The specific measurements are indicated by dots, the blue line indicates the mean of all measurements at a specific time step
						and the grey ribbon indicates the standard deviation from the mean value.</span></p>
				<p>
<div class="zoomin"> 
     <img src="images/temperature_plot.png" id="img" title="Temperature plot" /> 
  </div>
				</p>
				<p><span>The sensors show a greater level of agreement at the beginning of the measurement sequence. After three hours and with temperatures below 14 °C the differences between the measured temperature increases. While S2 and S4 generally are
						closer to the mean value, S3 measures constantly higher values while S1 measures lower values compared to the mean.</span></p>
				<p><strong><span>RMSE between temperature measurements</span></strong></p>
				<figure>
					<table>
						<thead>
							<tr>
								<th><span>Sensors</span></th>
								<th><span>S1</span></th>
								<th><span>S2</span></th>
								<th><span>S3</span></th>
								<th><span>S4</span></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><strong><span>S1</span></strong></td>
								<td><span>0</span></td>
								<td><span>0.17</span></td>
								<td><span>0.52</span></td>
								<td><span>0.17</span></td>
							</tr>
							<tr>
								<td><strong><span>S2</span></strong></td>
								<td><span>0.17</span></td>
								<td><span>0</span></td>
								<td><span>0.36</span></td>
								<td><span>0.06</span></td>
							</tr>
							<tr>
								<td><strong><span>S3</span></strong></td>
								<td><span>0.52</span></td>
								<td><span>0.36</span></td>
								<td><span>0</span></td>
								<td><span>0.37</span></td>
							</tr>
							<tr>
								<td><strong><span>S4</span></strong></td>
								<td><span>0.17</span></td>
								<td><span>0.06</span></td>
								<td><span>0.37</span></td>
								<td><span>0</span></td>
							</tr>
						</tbody>
					</table>
				</figure>
				<p><span>This is also indicated by the RMSE comparison between the sensors. While S2 and S4 only show an RMSE of 0.06°C, S3 has an RMSE of about 0.36°C to S2 and S4 and even 0.52°C to S1. The RMSE between S1 and S2 and S4 is comparatively low
						with only 0.17°C. This analysis shows that S3 most probably should be replaced if RMSE below 0.5°C is desired. Another option could be to calculate a calibration curve for the specific sensor since the correlation coefficients to the over
						sensors are around 0.99, indicating that the measurement of temperature differences works properly. Only the assignment to specific temperature values does not work correctly which could be compensated for by applying a calibration
						function.</span></p>
				<p><span>An exemplary calibration of sensor S3 for the variable air temperature would look like this: </span></p>
	
						<div class="zoomin"> 
	 <img src="images/calibration_curve.png" id="img" title="calibration curve" /> 
  </div>
						<div class="zoomin"> 
     <img src="images/calibrated.png" id="img" title="calibrated sensor measurments" /> 
  </div>

				<h3>Humidity</h3>
				<p><span>The measurement of the relative air humidity shows a similar pattern of sensor differences like the temperature. The first three hours of the measurement, the level of agreement between the sensor is higher than after 5 pm. However,
						compared to the temperature measurements, even within the first three hours the standard deviation of the mean is with approximately +-2.5% substantially larger than the standard deviation of the temperature. The standard deviation of the
						measurements increases over time and reaches a level of +- 5%.</span></p>
				<p>
				<div class="zoomin"> 
	 <img src="images/humidity_plot.png" id="img" title="calibrated sensor measurements" /> 
  </div>
				</p>
				<p><span>A similar pattern in the differences between the sensors compared to the temperature measurements can be observed. S2 and S4 measurements are very similar and close to the mean, even though towards the end of the measurement period
						their differences increase. S1 constantly measures higher relative humidity values while S3 constantly measures lower relative humidity values. This pattern is opposed to the pattern in temperature which makes a case because with lower
						temperatures and constant humidity the relative humidity increases.</span></p>
				<p><strong><span>RMSE between relative humidity measurements</span></strong></p>
				<figure>
					<table>
						<thead>
							<tr>
								<th><span>Sensors</span></th>
								<th><span>S1</span></th>
								<th><span>S2</span></th>
								<th><span>S3</span></th>
								<th><span>S4</span></th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><strong><span>S1</span></strong></td>
								<td><span>0</span></td>
								<td><span>4.52</span></td>
								<td><span>8.55</span></td>
								<td><span>4.27</span></td>
							</tr>
							<tr>
								<td><strong><span>S2</span></strong></td>
								<td><span>4.52</span></td>
								<td><span>0</span></td>
								<td><span>4.1</span></td>
								<td><span>0.49</span></td>
							</tr>
							<tr>
								<td><strong><span>S3</span></strong></td>
								<td><span>8.55</span></td>
								<td><span>4.1</span></td>
								<td><span>0</span></td>
								<td><span>4.41</span></td>
							</tr>
							<tr>
								<td><strong><span>S4</span></strong></td>
								<td><span>4.27</span></td>
								<td><span>0.49</span></td>
								<td><span>4.41</span></td>
								<td><span>0</span></td>
							</tr>
						</tbody>
					</table>
				</figure>
				<p><span>Again, while S2 and S4 only show a RMSE of about 0.5%, S1 and S3 show an RMSE of about 4.4% to S2 and S4 and about the double to each other (8.55%). Both, S1 and S3 either need a replacement or a sensor specific calibration curve
						should be calculated. </span></p>
				<h3>Illuminance</h3>
				<p><span>Since we started our measurements in the afternoon and ended it around 9 am the next morning, most of the measurements of illuminance are equal or close to 0 lx. However, during the illuminated hours the sensors show a great level of
						agreement though the standard deviation is higher in the morning hours compared to the evening. S1 and S3 however, seem to have produced some significant outliers. The data at hand though is not enough to evaluate this assumption. Another
						measurement campaign during daylight would be needed to generate further insights of the differences between the sensors.</span></p>
				<p>
<div class="zoomin"> 
     <img src="images/lux_plot.png" id="img" title="calibrated sensor measurements" /> 
 </div>
				</p>
				<h3>Audio Records</h3>
				<p><span>For a future automated bird species identification the sensorboxes were also equipped with microphones. They record 30 seconds of audio every 30 minutes when all the other data are collected as well. As an example you can listen
						here to an audio record from 6 am.</span></p>
				<p>
					<audio controls="controls" onerror="this.style.display = 'none';">
						<source src="images/audio_sample.wav" type="audio/wav">
					</audio></p>
				<h3>Camera Shots</h3>
				<p><span>Coming soon...</span></p>
			</article>
	
		</div>
	
		<!-- Footer -->
		<footer id="footer">
			<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.
			<p>
				<a href="https://github.com/goergen95/sensorbox-docu" class="icon fa-github"><span class="label">Github</span></a>
			</p>
		</footer>
	
	</div>
	
	<!-- BG -->
	<div id="bg"></div>
	
	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>
