---
layout: page
title: Hall Sensor KY-024
---

The KY-024 sensor  from JOY-IT measures magnetic fields and is able to deliver the output both, in analog and digital format. You can check the manual [here]( <http://anleitung.joy-it.net/wp-content/uploads/2018/11/SEN-KY024-Manual.pdf>). The digital output, which is used here since we are using a Raspberry Pie as a microcontroller, consists of a signal which is sent if a magnetic field is detected. The analog signal, in contrast, actually indicates the direct measurement of the value of the strength of the magnetic field itself. 

The board is equipped with two LEDs. One of it indicates if an input voltage is present while the other one only flash when a magnetic field is detected. Here, we striped the energy supply LED from the connection in order to save some energy. It is a good idea to keep the other LED as the detection of a magnetic field can be checked visually very quick. 

The black cube on the opposing end of the pins is the actual sensor. It measures the magnetic field in the environment and sends an analog signal to the amplifier in the middle of the board. The potentiometer determines the amplification of the signal. We set it to the maximum amplification by turning the drill clock-wise approximately 15 times or until you can hear clicking sounds in a regular pattern. Be advised that the signal is inverted, meaning that a low current indicates a high strength of a magnetic field while a high current means a low or non-existent magnetic field. That also means, that no direct measurement of the magnetic strength is obtained but only a measurement of the relative strength compared to the ‘normal’ magnetic field which is set by the potentiometer. 

For the setup of the SensorBox the hall sensors are very important since they allow the detection of the upper and lower limit of the cable car. Therefor, the orientation of the sensors within the box is of outermost importance when we wanted to ensure that engine stops at the right moment. One sensor measures the magnetic field for the upper limit while the other measures the lower limit which both leads the engine to stop and [change the direction](https://github.com/Nature40/pysensorproxy/blob/master/sensorproxy/lift.py).

<img src="assets/images/hall_sensor.jpg" class="image" alt="Assembly of the hall sensors" width= "40%"/>

The sensor for the lower limit (orange cable) is connected to GPIO 22 while the one for the upper limit (green cable) is connected to GPIO 21. Accordingly, the magnets on the cables need to be placed correctly, with the north pole facing the SensorBox.  